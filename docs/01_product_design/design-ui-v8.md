# AI輔助工作流程應用程式 - 更新UI設計 (MVP 階段)

## 主要佈局（三欄設計）

```
┌─────── Explorer (280px) ─────┐ ┌─────── Chat (彈性) ──────────┐ ┌─────── Preview (360px) ──────────┐
│ 🏠                           │ │                              │ │                                  │
│                             │ │ 🏠 Home > 👥 Workspace        │ │ 🏠 Home > 👥 Workspace           │
│ [+ 新聊天]                   │ │ > 📋 t21-hello_world         │ │ > 📋 t21-hello_world             │
│                             │ │ > chat1.v1.json              │ │ > navbar.v1.py                  │
│ ▼ workspace                 │ │                              │ │                                  │
│   ▼ 📋 t21-hello_world 🏃 ⏸️ ⋮ │ │ ▼ Task Knowledge & Instruction │ │ [操作按鈕]                        │
│     [+ 新聊天]               │ │ ┌───────────────────────────┐ │ │ ✏️ Edit  ⬇️ Download  📤 Share    │
│     💬 chat1.v1 ⋮           │ │ │ <task_knowledge>          │ │ │                                  │
│     💬 chat2.v2 ⋮           │ │ │ #p1.jpg #p2.jpg           │ │ │ [預覽/編輯區域]                    │
│     📄 navbar.v1.py ⋮       │ │ │ </task_knowledge>           │ │ │ def create_navbar():             │
│     📄 navbar.v2.py ⋮       │ │ │ <task_instruction>          │ │ │     # Navbar implementation      │
│     📄 api-spec.md ⋮        │ │ │ ...                         │ │ │     ...                         │
│                            │ │ │ </task_instruction>          │ │ │                                  │
│   ► 📋 t20-feature_xyz ✓ ▶️ ⋮  │ │ └───────────────────────────┘ │ │                                  │
│   ► a_not_task_folder ⋮      │ │                              │ │                                  │
│   ► 📋 t19-bug_fix ✓ ▶️ ⋮     │ │ [內容區域]                    │ │                                  │
│                            │ │ [User] 請按照需求編寫...  [edit] │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ [AI] 我已分析完需求...          │ │                                  │
│                            │ │     [copy] [retry] [...]     │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ [User] 這部分需要調整...  [edit] │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ [AI] 根據反饋，我建議...        │ │                                  │
│                            │ │     [copy] [retry] [...]     │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ [Summarize ✨] 已將摘要儲存為:   │ │                                  │
│                            │ │ [chat1_summary.v1.md]         │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ ------------------------------ │ │                                  │
│                            │ │                              │ │                                  │
│                            │ │ [Summarize ✨] [下一步 ▶️✨]    │ │                                  │
│                            │ │ ┌─────────────────────────┐  │ │                                  │
│                            │ │ │Write a message...       │  │ │                                  │
│                            │ │ └─────────────────────────┘  │ │                                  │
│                            │ │ [📎附件] [發送 ➤]             │ │                                  │
│ ⚙️ SETTINGS                │ │                              │ │                                  │
└────────────────────────────┘ └──────────────────────────────┘ └──────────────────────────────────┘
```

## 聊天輸入區域詳細設計

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│ [Summarize ✨] [下一步 ▶️✨]                                                      │
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │Write a message...                                                           │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
│ [Chat|Agent] [Claude 3.7] [📎附件] [發送 ➤]                                      │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 核心功能流程

### 1. 新聊天創建流程

點擊 [+ 新聊天] 後顯示的 modal：

```
┌────────── 新聊天 ──────────────────────────────────────────────────────┐
│                                                                       │
│ ✏️ 新聊天                                                               │
│                                                                       │
│ ┌─────────────────────────────────────────────────────────────────┐   │
│ │<task_knowledge>                                                 │   │
│ │#p1.jpg #p2.jpg #\*.jpg                                         │   │
│ │</task_knowledge>                                                │   │
│ │                                                                 │   │
│ │<task_instruction>                                               │   │
│ │...                                                              │   │
│ │</task_instruction>                                              │   │
│ │                                                                 │   │
│ │Prompt...                                                        │   │
│ └─────────────────────────────────────────────────────────────────┘   │
│                                                                       │
│ [Chat|Agent] [Create New Task] [Claude 3.7] [Submit]                 │
└───────────────────────────────────────────────────────────────────────┘
```

### 2. 「下一步」功能使用流程

點擊 [下一步 ▶️✨] 後顯示的 modal：

```
┌────────── 下一步 ─────────────────────────────────────────────────────┐
│                                                                     │
│ 下一步                                                               │
│ （AI建議）                                                           │
│ [將提取的文字翻譯成繁體中文]                                            │
│ [建議2...]                                                          │
│ [建議3...]                                                          │
│                                                                     │
│ ┌───────────────────────────────────────────────────────────────┐   │
│ │<task_knowledge>                                               │   │
│ │#chat_summary.md                                               │   │
│ │</task_knowledge>                                              │   │
│ │<task_instruction />                                           │   │
│ │                                                               │   │
│ │Prompt...                                                      │   │
│ └───────────────────────────────────────────────────────────────┘   │
│                                                                     │
│ [Chat|Agent] [Create New Task ✓] [Claude 3.7] [Submit]             │
└─────────────────────────────────────────────────────────────────────┘
```

### 3. 檔案引用（Task Knowledge）流程

在聊天輸入框中直接使用 `#檔案路徑` 語法：

```
╭─────────────────────────────────────────────╮
│ 請分析 #navbar.v1.py 中的程式碼並提供改進建議   │
│                                             │
╰─────────────────────────────────────────────╯
```

### 4. Summarize 功能使用流程

點擊 [Summarize ✨] 後，結果直接顯示在聊天框中：

```
[User] 請按照需求編寫... [edit]

[AI] 我已分析完需求...
    [copy] [retry] [...]

[User] 這部分需要調整... [edit]

[AI] 根據反饋，我建議...
    [copy] [retry] [...]

[Summarize ✨] 已將摘要儲存為: [chat1_summary.v1.md]
```

## 任務執行狀態指示

- ✓ - 已完成
- 🏃 - 執行中(1/4) - 括號中顯示進度
- ⏸️ - 暫停
- ⚠️ - 警告/有問題
- 🔴 - 錯誤/失敗
