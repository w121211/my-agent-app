# AI輔助工作流程應用程式 - 更新UI設計 (MVP 階段)

## 主要佈局（兩欄設計）

```
┌─────── Explorer (280px) ─────────┐ ┌─────── Chat/Preview (彈性) ───────────────────────────────────────┐
│ 🏠                               │ │                                                                  │
│                                 │ │ 🏠 Home > 👥 Workspace > t21-hello_world > chat_01.json          │
│ [+ 新聊天]                       │ │                                                                  │
│                                 │ │ [內容區域]                                                       │
│ ▼ workspace                     │ │ # 聊天檔案時：                                                   │
│   ▼ t21-hello_world 🏃 ⏸️ ⋮       │ │ [User] 請按照需求編寫...                                        │
│     [+ 新聊天]                   │ │                                                                  │
│     💬 chat_01.v20250412123000.. ⋮ │ │ [AI] 我已分析完需求...                                          │
│     💬 chat_02.v20250412154500.. ⋮ │ │                                                                  │
│     📄 navbar.v1.py ⋮           │ │ [User] 這部分需要調整...                                        │
│     📄 navbar.v2.py ⋮           │ │                                                                  │
│     📄 api-spec.md ⋮            │ │ [AI] 根據反饋，我建議...                                        │
│                                │ │                                                                  │
│   ► t20-feature_xyz ✓ ▶️ ⋮      │ │                                                                  │
│   ► t19-bug_fix ✓ ▶️ ⋮          │ │                                                                  │
│                                │ │                                                                  │
│                                │ │ # 一般檔案時：                                                    │
│                                │ │ [檔案內容預覽/編輯]                                               │
│                                │ │                                                                  │
│                                │ │ --------------------------------                                 │
│                                │ │                                                                  │
│                                │ │ [下一步] ▶️  [重新執行] 🔄                                        │
│                                │ │ ╭─────────────────────────╮                                     │
│                                │ │ │Write a message...       │                                     │
│                                │ │ ╰─────────────────────────╯                                     │
│                                │ │ [📎附件] [發送 ➤]                                               │
│                                │ │                                                                  │
│ ⚙️ SETTINGS                    │ │                                                                  │
└────────────────────────────────┘ └──────────────────────────────────────────────────────────────────┘
```

%%% 佈局改成3欄：Explorer | Chat | Preview

%%% task folder 用 emoji 來表示他與一般 folder 不同

      ▼ 📋 t21-hello_world 🏃 ⏸️
      ► a_not_task_folder

%%%

      │ 🏠 Home > 👥 Workspace > t21-hello_world > chat_01.json          │
      │ >>> (這裡)                                                         │
      │ [內容區域]                                                       │

      這裡可以加上一些 task 相關的功能，例如：

      1.

      1. task knowledge、instruction: 我的想像是可以是一個文字輸入框，可展開/收縮
      ---------- (Text Input Box) -------------
         <task_knowledge>
         #p1.jpg #p2.jpg
         #\*.jpg (或直接用萬用字元)
         </task_knowledge>

         <task_instruction>
         …
         </task_instruction>
      -----------------------------------------

      2. ...

%%% 每個 message 會有一些功能按鈕，例如

      [User] 這部分需要調整...   [edit]  // 點擊[edit]後可以修改原本的 message
      [AI] 根據反饋，我建議...    [copy] [retry] [...]     // [...] 可能包含像：like、dislike、存成file、以此開新chat、等等

%%% [Summarize ✨] [下一步 ▶️✨] <del>[重新執行] 🔄 </del>

      1. 移除 [重新執行] 🔄 ，因為可以直接用 explorer 來控制
      2. 利用 ✨ 來表達 ai 功能
      3. Summarize：用於將本討論串整理 ＆ 存成 md file

%%% chat panel 類似這樣：

      (Text Input Box)
      --------------------------------------------------|
      |                                                  |
      |                                                  |
      |                                                  |
      --------------------------------------------------|
      [Chat|Agent] [Create New Task(只有初始prompt出現)] [Claude 3.7] [Submit]

      [Chat|Agent]：可選，預設是Chat mode
      [Create New Task]：勾選，enabled 會在當前的 folder 下創建一個新的 task folder，否則就是創一個新的 chat file -> 這個只有在第一個 prompt 時會出現，之後因為已經決定形式，user input 就不會在出現這個選項

## 核心功能流程 (PUSH NOT PULL)

### 1. 新聊天創建流程

```
┌────────── 新聊天輸入框 ──────────────┐
│                                     │
│ ✏️ 新聊天                            │
│                                     │
│ ╭───────────────────────────────────╮
│ │ 在此輸入指示...                     │
│ │ #p1.jpg #p2.jpg                   │
│ │                                   │
│ │                                   │
│ ╰───────────────────────────────────╯
│
│ [取消]              [創建] ➤
└─────────────────────────────────────┘
```

%%% 點擊 [+ 新聊天]，類似

      輸入框
      --------------------------------------------------
      <task_knowledge>
      #p1.jpg #p2.jpg #\*.jpg
      </task_knowledge>

      <task_instruction>
      ...
      </task_instruction>

      Prompt...
      --------------------------------------------------|
      [Chat|Agent] [Create New Task(只有初始prompt出現)] [Claude 3.7] [Submit]

      1. 新聊天輸入框是個 modal
      2. 不需要 [取消](modal方式，點外面就關閉)、[創建](有submit)

### 2. 「下一步」功能使用流程

當AI完成一個任務後：

```
┌────────── 下一步建議 ─────────────────┐
│                                     │
│ 下一步建議：                          │
│                                     │
│ 基於當前進度，建議的下一步是：           │
│ 將提取的文字翻譯成繁體中文。            │
│                                     │
│ 選擇操作：                           │
│ [✓] 接受建議                         │
│ [ ] 自訂下一步                       │
│                                     │
│ [取消]              [確認] ➤         │
└─────────────────────────────────────┘
```

%%% 點擊 [下一步 ▶️✨] ，顯示 下一步 modal

      1. 類似新聊天輸入框，預先寫好內容，讓用戶決定是否執行、或是直接修改 prompt

      下一步
      （AI建議）
      [將提取的文字翻譯成繁體中文]
      [建議2...]
      [建議3...]

      輸入框
      --------------------------------------------------
      <task_knowledge>
      #chat_summary.md  // 舉例：將當前的 chat 整理後，作為下個 task 的輸入
      </task_knowledge>
      <task_instruction />

      Prompt...
      --------------------------------------------------|
      [Chat|Agent] [Create New Task (勾選)] [Claude 3.7] [Submit]

如果選擇「自訂下一步」：

```
┌────────── 自訂下一步 ────────────────┐
│                                    │
│ 自訂下一步操作：                      │
│                                    │
│ ╭──────────────────────────────────╮
│ │ 請輸入下一步指示...                │
│ │                                  │
│ │                                  │
│ │                                  │
│ ╰──────────────────────────────────╯
│
│ [取消]              [確認] ➤        │
└────────────────────────────────────┘
```

%%% 不需要自訂下一步，用戶可直接編輯 prompt

### 3. 檔案引用（Task Knowledge）流程

在聊天輸入框中直接使用 `#檔案路徑` 語法：

```
╭─────────────────────────────────────────────╮
│ 請分析 #navbar.v1.py 中的程式碼並提供改進建議   │
│                                             │
╰─────────────────────────────────────────────╯
```

## 任務執行狀態指示

- ✓ - 已完成
- 🏃 - 執行中(1/4)
- ⏸️ - 暫停
- ⚠️ - 警告/有問題
- 🔴 - 錯誤/失敗
