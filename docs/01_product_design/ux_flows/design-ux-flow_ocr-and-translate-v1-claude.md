# UX 流程設計 - 對書頁掃描檔做 OCR 與翻譯

本文檔描述三種使用我們應用程式處理書頁掃描檔的 OCR 與翻譯工作流程，展示系統的彈性與自動化程度。

## 1. 純手動流程 - 展示編輯器的高度彈性

這個流程適合希望按照自己習慣流程工作的使用者，整個過程在同一個 task 內，使用者透過建立新 chat 來完成各個子工作。

### OCR 處理階段（包含建立新 task）

1. **初始設置**

   - 使用者在主頁點擊「新聊天」，彈出聊天視窗
   - 系統預設為 chat 模式且勾選「建立新 task」
   - 使用者拖曳 p1.jpg, p2.jpg 等檔案至視窗
   - 系統顯示檔案引用「#p1.jpg #p2.jpg #...」在輸入區域

2. **處理第一張圖片**

   - 使用者調整 prompt：「#p1.jpg #p2.jpg #... 請對 #p1.jpg 做 OCR 辨識，把所有文字都抓出來，排版請盡量照原來的書本格式」並送出
   - AI 回應 p1 的 OCR 結果（包在 code block 或 `<artifact>` 標籤內）
   - 若為 artifact，系統自動存檔為 p1_ocr.md
   - 若為 code block，使用者可點擊 UI 功能將其儲存為檔案

3. **處理其餘圖片**
   - 使用者建立新 chat，輸入「請對 #p2.jpg 做 OCR 辨識，把所有文字都抓出來，排版請盡量照原來的書本格式」
   - 對 p3 等其他圖片重複相同流程
   - 完成後，task 資料夾中包含 chat1, chat2, chat3... 以及 p1_ocr.md, p2_ocr.md 等檔案

### 翻譯階段

1. **初始翻譯嘗試**

   - 使用者建立新 chat，輸入「請翻譯 #p1_ocr.md」
   - AI 輸出翻譯結果
   - 若結果不符合預期（這是常見現象），使用者可進行下一步調整

2. **優化翻譯品質**

   - 使用者在 task 資料夾中新增「#翻譯注意事項.txt」和「#輸出範例.txt」作為指引
   - 使用者修改 prompt：「請翻譯 #p1_ocr.md #翻譯注意事項.txt #輸出範例.txt」
   - 系統自動建立新版本 chat（如 chat1.v1.json 變成 chat1.v2.json），保留原始對話
   - AI 輸出改進的翻譯結果
   - 使用者根據結果持續調整指引，直到符合預期

3. **處理其餘翻譯**
   - 使用者建立新 chat，輸入「請翻譯 #p2_ocr.md #翻譯注意事項.txt #輸出範例.txt」
   - 重複流程直到完成所有翻譯工作

## 2. Agent 模式 - 全自動執行

此流程展示積極型 agent 的運作方式，代理會連續執行任務直到完成，無需使用者中途干預。

1. **初始設置**

   - 使用者在主頁點擊「新聊天」，彈出聊天視窗
   - 使用者拖曳 p1.jpg, p2.jpg 等檔案至視窗
   - 系統顯示檔案引用「#p1.jpg #p2.jpg #...」在輸入區域
   - 使用者切換至 agent 模式，保持「建立新 task」選項
   - 使用者輸入 prompt：「#p1.jpg #p2.jpg #... 請對書頁掃描檔做 OCR 與翻譯」並送出
   - 系統建立新 task 資料夾（包含掃描檔）、chat 檔案，並開始執行

2. **自動執行流程**（全部在同一個 chat 中）
   - 系統通知：task 開始執行
   - AI 分析使用者意圖並制定工作計畫
   - AI 對 #p1 進行 OCR，並顯示`<工作規劃>`區塊，說明計畫和進度
   - AI 透過 function call 將結果儲存為 p1_ocr.md
   - 系統回應：function call result: file `p1_ocr.md` created
   - AI 對剩餘圖片重複此流程
   - AI 對 #p1_ocr.md 進行翻譯
   - AI 透過 function call 將結果儲存為 p1_ocr_translate.txt
   - AI 對剩餘檔案重複翻譯流程
   - AI 將所有翻譯結果整合為一個 book_ocr_translate.txt 檔案
   - AI 判斷工作完成，結束 agent loop
   - 系統通知：task 執行結束

## 3. 「下一步」功能 - 半自動化工作流

此流程展示「下一步」功能如何讓 AI 協助規劃工作進度，減輕使用者認知負擔。

1. **初始階段與純手動流程相同**

   - 使用者建立新 chat 並上傳檔案
   - 使用者編寫 OCR prompt 並取得第一張圖片的結果
   - 系統/使用者將結果儲存為檔案

2. **使用「下一步」功能**
   - 使用者在 chat 介面點擊「下一步」按鈕
   - 系統後台：AI 分析當前 task 和 chat 內容，生成下一步建議
   - 系統顯示「下一步」視窗，包含 AI 建議：
     「建立新 chat，prompt: 請對 #p2.jpg 做 OCR 辨識，把所有文字都抓出來，排版請盡量照原來的書本格式」
   - 使用者可選擇確認、編輯或直接送出
   - 系統將 AI 建議轉換為 function call
   - 系統自動執行：建立新 chat，填入建議的 prompt，並開始執行
   - chat 欄位載入新對話，已預填使用者對話：
     「請對 #p2.jpg 做 OCR 辨識，把所有文字都抓出來，排版請盡量照原來的書本格式」
   - AI 回應結果
   - 使用者可再次點擊「下一步」，繼續循環

## 建議的流程改進

1. **翻譯階段優化**

   - 可考慮在初次翻譯時就提供基本的「翻譯指引」範本，減少使用者需要從頭建立指引的情況
   - 理由：減少使用者工作量，提高初次翻譯的品質

2. **「下一步」功能擴展**

   - 建議「下一步」功能提供多個選項而非單一建議，例如：
     1. 繼續 OCR 下一頁
     2. 開始翻譯已完成的 OCR 結果
     3. 將所有 OCR 結果合併為單一文件
   - 理由：增加彈性，更符合「Push not pull」設計理念

3. **批次處理選項**
   - 可考慮在純手動流程中增加批次處理選項，讓使用者能一次指定處理多個檔案
   - 理由：提高效率，減少重複性操作

這些流程展示了應用程式的不同使用方式，從完全手動到全自動，適應不同使用者的工作習慣與需求。
