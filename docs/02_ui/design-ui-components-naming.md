# æº–å‚™

## ç¾ä»£æœ€ä½³å¯¦è¸

ç¾ä»£ React é–‹ç™¼ä¸­æœ€æ™®éçš„åšæ³•æ˜¯ï¼š

- ç‚ºç·Šå¯†ç›¸é—œçš„çµ„ä»¶ä½¿ç”¨å±¤ç´šå¼å‘½åï¼ˆç‰¹åˆ¥æ˜¯å°ˆå±¬æ–¼æŸå€‹çˆ¶çµ„ä»¶çš„å­çµ„ä»¶ï¼‰
- å°æ–¼å¯èƒ½åœ¨å¤šè™•é‡ç”¨çš„é€šç”¨çµ„ä»¶ä½¿ç”¨ä¸Šä¸‹æ–‡ç„¡é—œçš„å‘½å
- çµåˆæ–‡ä»¶å¤¾çµæ§‹ä¾†çµ„ç¹”ç›¸é—œçµ„ä»¶ï¼Œæ¸›å°‘å‘½åå†—é•·åº¦

çµ±ä¸€å‘½åè¦å‰‡ï¼š

- ä½¿ç”¨ "Panel" è¡¨ç¤ºä¸»è¦å¸ƒå±€å€åŸŸå®¹å™¨
- ä½¿ç”¨ "View" è¡¨ç¤ºä¸»è¦è² è²¬å…§å®¹å±•ç¤ºçš„çµ„ä»¶
- ä½¿ç”¨ "Container" è¡¨ç¤ºç®¡ç†ç‹€æ…‹æˆ–å¸ƒå±€çš„é‚è¼¯å®¹å™¨
- ä¸æ·»åŠ å¾Œç¶´çš„åç¨±ç”¨æ–¼å…·é«”çš„ UI å…ƒç´ 

## çµ„ä»¶å±¤ç´šé—œä¿‚ç¢ºèª

```
App
  â””â”€â”€ Workspace
       â”œâ”€â”€ Explorer
       â”œâ”€â”€ Chat
       â”œâ”€â”€ Preview
       â””â”€â”€ ...å…¶ä»–é¢æ¿
```

é€™ç¨®å±¤ç´šé—œä¿‚åœ¨ VS Codeã€JetBrains IDE ç­‰é–‹ç™¼å·¥å…·ä¸­å¾ˆå¸¸è¦‹

```
App (æ•´å€‹æ‡‰ç”¨)
  â””â”€â”€ WorkspaceLayout (å·¥ä½œç’°å¢ƒå¸ƒå±€)
       â”œâ”€â”€ ExplorerPanel (å·¦å´è³‡æºç®¡ç†é¢æ¿)
       â”‚    â””â”€â”€ [å„ç¨®æ¨¹ç¯€é»å’ŒæŒ‰éˆ•]
       â”œâ”€â”€ ChatPanel (ä¸­é–“èŠå¤©/äº’å‹•é¢æ¿)
       â”‚    â””â”€â”€ [æ¶ˆæ¯ã€è¼¸å…¥å€ç­‰]
       â””â”€â”€ PreviewPanel (å³å´é è¦½/å…§å®¹é¢æ¿)
            â””â”€â”€ [å…§å®¹è¦–åœ–ã€æ“ä½œæŒ‰éˆ•ç­‰]
```

# ä½¿ç”¨çµ„åˆå‘½åé¢¨æ ¼çš„ React çµ„ä»¶å‘½åæ–¹æ¡ˆ

æ ¹æ“šæœ€æ–° UI è¨­è¨ˆï¼Œä»¥ä¸‹æ˜¯æ¡ç”¨çµ„åˆå‘½åï¼ˆComposite Namingï¼‰é¢¨æ ¼çš„æ›´æ–°æ–¹æ¡ˆï¼š

## ä¸»è¦å¸ƒå±€çµ„ä»¶

- `WorkspaceThreeColumnLayout` - å®Œæ•´ç‰ˆä¸‰æ¬„å·¥ä½œå€ä¸»å¸ƒå±€
- `WorkspaceTwoColumnLayout` - MVP ç‰ˆæœ¬é›™æ¬„å·¥ä½œå€å¸ƒå±€

## å·¦å´é¢æ¿ (Explorer)

- `ExplorerPanel` - ä»»å‹™è³‡æºç®¡ç†å™¨é¢æ¿
  - `ExplorerHeader` - è³‡æºç®¡ç†å™¨é ‚éƒ¨å°èˆª
  - `WorkspaceTreeView` - å·¥ä½œå€ä»»å‹™æ¨¹çµæ§‹
  - `TaskTreeNode` - ä»»å‹™æ¨¹ç¯€é»
    - `TaskStatusBadge` - ä»»å‹™ç‹€æ…‹æ¨™è¨˜ (ğŸƒ, âœ“, â¸ï¸)
    - `TaskActionButton` - ä»»å‹™å‹•ä½œæŒ‰éˆ• (â–¶ï¸, â¸ï¸)
    - `TaskOptionsButton` - ä»»å‹™é¸é …æŒ‰éˆ• (â‹®)
  - `SubtaskTreeNode` - å­ä»»å‹™æ¨¹ç¯€é»
    - `SubtaskStatusBadge` - å­ä»»å‹™ç‹€æ…‹æ¨™è¨˜ (âœ“, ğŸ”´, âš ï¸, ğŸ“)
    - `SubtaskActionButton` - å­ä»»å‹™å‹•ä½œæŒ‰éˆ• (â–¶ï¸, ğŸ”)
    - `SubtaskOptionsButton` - å­ä»»å‹™é¸é …æŒ‰éˆ• (â‹®)
  - `FileTreeNode` - æ–‡ä»¶æ¨¹ç¯€é»
    - `ChatFileNode` - èŠå¤©æ–‡ä»¶ç¯€é» (ğŸ’¬)
    - `DocumentFileNode` - æ–‡æª”æ–‡ä»¶ç¯€é» (ğŸ“„)
    - `FileOptionsButton` - æ–‡ä»¶é¸é …æŒ‰éˆ• (â‹®)
  - `NewChatButton` - æ–°å»ºèŠå¤©æŒ‰éˆ•
  - `NewTaskButton` - æ–°å»ºä»»å‹™æŒ‰éˆ•
- `ExplorerViewSwitch` - è³‡æºç®¡ç†å™¨è¦–åœ–åˆ‡æ›å™¨
  - `ExplorerViewButton` - è³‡æºç®¡ç†å™¨è¦–åœ–æŒ‰éˆ• (ğŸ“, ğŸ”, âš™ï¸)

## ä¸­é–“é¢æ¿ (Chat)

- `ChatPanel` - èŠå¤©é¢æ¿
  - `ChatNavigationHeader` - èŠå¤©å°èˆªé ‚éƒ¨
    - `NavigationBreadcrumb` - å°èˆªéºµåŒ…å±‘
  - `ChatMessagesView` - èŠå¤©æ¶ˆæ¯åˆ—è¡¨
    - `ChatMessage` - åŸºæœ¬èŠå¤©æ¶ˆæ¯çµ„ä»¶
      - `UserChatMessage` - ç”¨æˆ¶èŠå¤©æ¶ˆæ¯
      - `AssistantChatMessage` - AI åŠ©æ‰‹èŠå¤©æ¶ˆæ¯
  - `UserPresenceBanner` - ç”¨æˆ¶åœ¨ç·šç‹€æ…‹æ©«å¹…
    - `UserPresenceIndicator` - ç”¨æˆ¶åœ¨ç·šç‹€æ…‹æŒ‡ç¤ºå™¨ (ğŸ‘¤)
  - `ChatInputContainer` - èŠå¤©è¼¸å…¥å€åŸŸ
    - `ChatMessageInput` - èŠå¤©è¼¸å…¥æ¡†
    - `FileAttachmentButton` - æ–‡ä»¶é™„ä»¶æŒ‰éˆ• (ğŸ“)
    - `InsertContentButton` - æ’å…¥å…§å®¹æŒ‰éˆ• (ğŸ¨)
    - `ChatSendButton` - ç™¼é€èŠå¤©æŒ‰éˆ• (â¤)

## å³å´é¢æ¿ (Preview)

- `PreviewPanel` - å…§å®¹é è¦½é¢æ¿
  - `PreviewNavigationHeader` - é è¦½å°èˆªé ‚éƒ¨
    - `NavigationBreadcrumb` - å°èˆªéºµåŒ…å±‘
  - `PreviewActionToolbar` - é è¦½æ“ä½œå·¥å…·æ¬„
    - `EditButton` - ç·¨è¼¯æŒ‰éˆ• (âœï¸)
    - `DownloadButton` - ä¸‹è¼‰æŒ‰éˆ• (â¬‡ï¸)
    - `ShareButton` - åˆ†äº«æŒ‰éˆ• (ğŸ“¤)
  - `FileContentView` - æ–‡ä»¶å…§å®¹è¦–åœ–
    - `CodeFileView` - ä»£ç¢¼æ–‡ä»¶é è¦½
    - `MarkdownFileView` - Markdown æ–‡ä»¶é è¦½

## MVP ç‰ˆæœ¬çµ„åˆé¢æ¿

- `ChatPreviewPanel` - èŠå¤©èˆ‡é è¦½çµ„åˆé¢æ¿
  - `CombinedNavigationHeader` - çµ„åˆé¢æ¿å°èˆªé ‚éƒ¨
    - `NavigationBreadcrumb` - å°èˆªéºµåŒ…å±‘
  - `ContentSwitchView` - å…§å®¹åˆ‡æ›è¦–åœ–
    - `ChatMessagesView` - èŠå¤©æ¶ˆæ¯è¦–åœ–
    - `FileContentView` - æ–‡ä»¶å…§å®¹è¦–åœ–
  - `ChatInputContainer` - èŠå¤©è¼¸å…¥å€åŸŸ
    - `ChatMessageInput` - èŠå¤©è¼¸å…¥æ¡†
    - `FileAttachmentButton` - æ–‡ä»¶é™„ä»¶æŒ‰éˆ• (ğŸ“)
    - `ChatSendButton` - ç™¼é€èŠå¤©æŒ‰éˆ• (â¤)

## æ¨¡æ…‹æ¡†çµ„ä»¶

- `PromptInputModal` - æç¤ºè©è¼¸å…¥æ¨¡æ…‹æ¡†
  - `ModalHeader` - æ¨¡æ…‹æ¡†æ¨™é¡Œ (âœï¸ æ–°èŠå¤© / æ–°ä»»å‹™)
  - `PromptTextarea` - æç¤ºè©æ–‡æœ¬è¼¸å…¥å€

## å…±äº«çµ„ä»¶

- `StatusBadge` - ç‹€æ…‹æ¨™è¨˜çµ„ä»¶
- `ActionIconButton` - æ“ä½œåœ–æ¨™æŒ‰éˆ•
- `CollapsibleSection` - å¯æŠ˜ç–Šå€å¡Š
- `NavigationBreadcrumb` - å°èˆªéºµåŒ…å±‘
- `TaskProgressIndicator` - ä»»å‹™é€²åº¦æŒ‡ç¤ºå™¨
- `OptionsButton` - é¸é …æŒ‰éˆ• (â‹®)
- `TooltipWrapper` - å·¥å…·æç¤ºåŒ…è£å™¨

## å‘½ååŸå‰‡ï¼š

1. çµ„åˆåŠŸèƒ½èˆ‡çµæ§‹ç‰¹æ€§æ–¼å‘½åä¸­
2. é ‚å±¤çµ„ä»¶ä½¿ç”¨å®Œæ•´çµ„åˆåç¨±ï¼ˆå¦‚ `WorkspaceThreeColumnLayout`ï¼‰
3. å­çµ„ä»¶ä¿ç•™é—œè¯æ€§ä½†ç°¡åŒ–çµ„åˆï¼ˆå¦‚ `ChatMessage` è€Œé `ChatMessagingPanelMessage`ï¼‰
4. å…±äº«çµ„ä»¶åç¨±åæ˜ å…¶åŠŸèƒ½å’Œç”¨é€”
5. åœ–æ¨™æŒ‰éˆ•çµ„ä»¶åç¨±åæ˜ å…¶åŠŸèƒ½å’Œåœ–æ¨™

é€™ç¨®æ›´æ–°å¾Œçš„å‘½åæ–¹æ¡ˆä¿æŒäº†åŸæœ‰çš„å‘½åé¢¨æ ¼ï¼ŒåŒæ™‚æ›´å…¨é¢åœ°è¦†è“‹äº†æ–° UI è¨­è¨ˆä¸­çš„æ‰€æœ‰çµ„ä»¶ï¼ŒåŒ…æ‹¬ç‹€æ…‹æŒ‡ç¤ºå™¨ã€å‹•ä½œæŒ‰éˆ•å’Œç”¨æˆ¶åœ¨ç·šç‹€æ…‹ç­‰æ–°å¢å…ƒç´ ã€‚
